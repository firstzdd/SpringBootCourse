## 7.1 Redis简介

Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 字符串（strings），散列（hashes），列表（lists），集合（sets），有序集合（sorted sets）与范围查询，bitmaps，hyperloglogs和地理空间（geospatial）索引半径查询。 Redis 内置了复制（replication），LUA脚本（Lua scripting），LRU驱动事件（LRU eviction），事务（transactions）和不同级别的磁盘持久化（persistence），并通过Redis哨兵（Sentinel）和自动分区（Cluster）提供高可用性（high availability）。 

正是因为上述特性，在企业环境中，Redis被大量使用。

Redis是以源码方式发布的，在Linux、Mac下都需要本地编译后使用。官方并不支持Windows版本，而且在生产环境下也少有见到在Windows下使用Redis的。

在学习过程中，为了简化环境，我们选择在Windows下安装Redis预编译版本。

### 7.1.1 安装

在[https://github.com/microsoftarchive/redis/releases](https://github.com/microsoftarchive/redis/releases) 这里下载Windows预编译版本的Redis，为了简便起见，我们选择解压包文件。

![image-20191127202044621](images/image-20191127202044621.png)

下载后，将其解压到用户目录中，例如`C:\Users\Kevin\Redis-x64-3.2.100`。

双击`redis-server.exe`运行Redis服务器，可以看到Redis服务在6379端口上已经开放了。
![image-20191127202555635](images/image-20191127202555635.png)

### 7.1.2 测试

双击`redis-cli.exe`启动Redis客户端，确定其已经连接到本地Redis服务。

![image-20191127202842175](images/image-20191127202842175.png)

#### 7.1.2.1 字符串的增删改查

输入命令`set name 'Kevin'`在Redis中增加一个Key-Vaule记录，并使用`get name`查询对应的值，如下：

![image-20191127203200439](images/image-20191127203200439.png)

输入命令`set name 'Roy'`，将name更新为Roy，然后再查询其值，如下：

![image-20191127203434648](images/image-20191127203434648.png)

输入命令`del name`，删除name的值，然后使用查询`get name`，返回nil。

我们用`exists name`命令检查name这个key是否再Redis中存在，返回0表示不存在，也就是说上面的删除命令是正确执行了的。

![image-20191127203555401](images/image-20191127203555401.png)

#### 7.1.2.2 List集合的增删改查

输入命令`lpush userList 'Kevin' 'Roy'`，Redis返回2，说明其存入了两个值。

![image-20191127210438989](images/image-20191127210438989.png)

输入命令`lrange userList 0 -1`，可以查询到userList这个List中的所有元素。

![image-20191127210600575](images/image-20191127210600575.png)

输入命令`rpush userList 'GoodMan'`，往List的尾部增加一个元素。

输入命令`lpush userList 'Wonderful'`，往List的头部增加一个元素。

然后查询所有的List元素，确认Wonderful增加在头部，GoodMan追加在尾部。

![image-20191127211032593](images/image-20191127211032593.png)

输入命令`lset userList 1 'Roy Zhang'`，将List中的第2个元素（Roy）更新为“Roy Zhang”，查询List确认是否正确修改。

![image-20191127211327545](images/image-20191127211327545.png)

输入命令`lrem userList 0 'Wonderful'`，删除List中的第1个元素，并查询确认。

![image-20191127211541725](images/image-20191127211541725.png)

#### 7.1.2.3 Set集合的增删改查

输入命令`sadd userSet 'Kevin' 'Roy' 'GoodMan'`，往userSet中添加3个元素。

然后执行命令`smembers userSet`命令，查询userSet这个Set集合中的元素。

![image-20191127212511955](images/image-20191127212511955.png)

输入命令`srem userSet 'GoodMan'`，删除userSet中的“GoodMan”元素。

![image-20191127212656923](images/image-20191127212656923.png)

输入命令`sadd userSet 'Wonderful'`，往userSet这个Set集合中添加“Wonderful”元素。查询后发现新加入的元素添加到了第2位，当然，只是显示问题，Set中的元素本来就没有顺序。

![image-20191127212911806](images/image-20191127212911806.png)

输入命令`sadd userSet 'Kevin'`，Redis返回0，是因为userSet中本来就有“Kevin”这个元素，所有无法再次添加。

![image-20191127213110248](images/image-20191127213110248.png)

#### 7.1.2.4 Hash集合的增删改查



#### 7.1.2.5 SortedSet集合的增删改查



