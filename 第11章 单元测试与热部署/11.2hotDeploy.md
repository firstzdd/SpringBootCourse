## 11.2 Spring Boot对热部署的支持

**[spring-boot-devtools](https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/html/using-spring-boot.html#using-boot-devtools)**是一个为开发者服务的一个模块，主要功能是监控程序的变化，然后进行自动重新启动，速度比手动停止后再启动要快，这样就可以节省出来手工操作的时间，达到提高开发效率工作效率的目的。

其实现原理主要是使用了两个类加载器（ClassLoader）：

- 一个根Class Loader加载不会改变的类（第三方Jar包）；
- 另一个称为 Restart Class Loader的类加载器加载会更改的类，这样在有代码更改的时候，原来的Restart Class Loader 被丢弃，重新创建一个新的Restart Class Loader，由于需要加载的类相比较少，所以实现了较快的重启时间（5秒以内）。

默认情况下，当DevTools检测到classpath下有文件（Class文件、配置文件等资源）内容变更时，它会对当前Spring Boot应用进行重新启动。

> 这种设计可以让程序快速的进行重启，因为这个时候第三方jar包中的资源已经在第一次启动的时候进行加载了，自动重启的时候就不需要加载它们了。在开发的时候，希望改动后立马生效的通常也是应用中自己定义的Class及其它资源。

在日常开发中，有些时候，我们会在修改了一组文件后才测试，也就是说我们不想在改变Class Path路径下的任何文件后立马就进行自动重启，而是希望在更改了很多文件后，在更改了一个特殊的文件后才触发自动重启。针对这种情况，可以通过spring.devtools.restart.trigger-file属性指定触发自动重启的文件，这样当该文件的内容发生了变更后就会触发自动重启。比如下面的配置就表示当更改了application.properties文件的内容时将触发自动重启。

```properties
spring.devtools.restart.trigger-file=application.properties
```

